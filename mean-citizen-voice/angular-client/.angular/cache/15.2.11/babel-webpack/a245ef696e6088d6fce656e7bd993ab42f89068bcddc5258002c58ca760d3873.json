{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/feedback.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AdminComponent_tr_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"select\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminComponent_tr_21_Template_select_ngModelChange_6_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(item_r1.status = $event);\n    })(\"change\", function AdminComponent_tr_21_Template_select_change_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.updateStatus(item_r1));\n    });\n    i0.ɵɵelementStart(7, \"option\", 6);\n    i0.ɵɵtext(8, \"Submitted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"option\", 7);\n    i0.ɵɵtext(10, \"In Review\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\", 8);\n    i0.ɵɵtext(12, \"Accepted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\", 9);\n    i0.ɵɵtext(14, \"In Progress\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"option\", 10);\n    i0.ɵɵtext(16, \"Resolved\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"option\", 11);\n    i0.ɵɵtext(18, \"Rejected\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\")(22, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AdminComponent_tr_21_Template_button_click_22_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const item_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.deleteFeedback(item_r1._id));\n    });\n    i0.ɵɵtext(23, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.category);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", item_r1.status);\n    i0.ɵɵadvance(14);\n    i0.ɵɵtextInterpolate(item_r1.userEmail);\n  }\n}\nexport class AdminComponent {\n  constructor(feedbackService) {\n    this.feedbackService = feedbackService;\n    this.feedback = [];\n  }\n  ngOnInit() {\n    this.loadFeedback();\n  }\n  loadFeedback() {\n    this.feedbackService.getFeedback().subscribe({\n      next: data => {\n        this.feedback = data;\n      },\n      error: err => {\n        console.error('Failed to load feedback', err);\n      }\n    });\n  }\n  updateStatus(item) {\n    this.feedbackService.updateFeedbackStatus(item._id, item.status).subscribe({\n      next: () => {\n        console.log('Status updated successfully');\n      },\n      error: err => {\n        console.error('Failed to update status', err);\n      }\n    });\n  }\n  deleteFeedback(id) {\n    if (confirm('Are you sure you want to delete this feedback?')) {\n      this.feedbackService.deleteFeedback(id).subscribe({\n        next: () => {\n          this.feedback = this.feedback.filter(item => item._id !== id);\n        },\n        error: err => {\n          console.error('Failed to delete feedback', err);\n        }\n      });\n    }\n  }\n  static {\n    this.ɵfac = function AdminComponent_Factory(t) {\n      return new (t || AdminComponent)(i0.ɵɵdirectiveInject(i1.FeedbackService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminComponent,\n      selectors: [[\"app-admin\"]],\n      decls: 22,\n      vars: 1,\n      consts: [[1, \"row\", \"mt-4\"], [1, \"col-md-12\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [1, \"form-select\", \"form-select-sm\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"submitted\"], [\"value\", \"in_review\"], [\"value\", \"accepted\"], [\"value\", \"in_progress\"], [\"value\", \"resolved\"], [\"value\", \"rejected\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"]],\n      template: function AdminComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"h2\");\n          i0.ɵɵtext(1, \"Admin Dashboard\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"h4\");\n          i0.ɵɵtext(5, \"Feedback Management\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 2)(7, \"table\", 3)(8, \"thead\")(9, \"tr\")(10, \"th\");\n          i0.ɵɵtext(11, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"th\");\n          i0.ɵɵtext(13, \"Category\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"th\");\n          i0.ɵɵtext(15, \"Status\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"th\");\n          i0.ɵɵtext(17, \"User\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"th\");\n          i0.ɵɵtext(19, \"Actions\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"tbody\");\n          i0.ɵɵtemplate(21, AdminComponent_tr_21_Template, 24, 4, \"tr\", 4);\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(21);\n          i0.ɵɵproperty(\"ngForOf\", ctx.feedback);\n        }\n      },\n      dependencies: [i2.NgForOf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["i0","AdminComponent","constructor","feedbackService","ngOnInit","loadFeedback","getFeedback","subscribe","next","data","feedback","error","err","console","updateStatus","item","updateFeedbackStatus","_id","status","log","deleteFeedback","id","confirm","filter","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Jadala Yashwanth Sai\\OneDrive\\Desktop\\Final\\mean-citizen-voice\\angular-client\\src\\app\\components\\admin\\admin.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FeedbackService } from '../../services/feedback.service';\n\n@Component({\n  selector: 'app-admin',\n  template: `\n    <h2>Admin Dashboard</h2>\n    \n    <div class=\"row mt-4\">\n      <div class=\"col-md-12\">\n        <h4>Feedback Management</h4>\n        <div class=\"table-responsive\">\n          <table class=\"table table-striped\">\n            <thead>\n              <tr>\n                <th>Title</th>\n                <th>Category</th>\n                <th>Status</th>\n                <th>User</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let item of feedback\">\n                <td>{{item.title}}</td>\n                <td>{{item.category}}</td>\n                <td>\n                  <select class=\"form-select form-select-sm\" [(ngModel)]=\"item.status\" (change)=\"updateStatus(item)\">\n                    <option value=\"submitted\">Submitted</option>\n                    <option value=\"in_review\">In Review</option>\n                    <option value=\"accepted\">Accepted</option>\n                    <option value=\"in_progress\">In Progress</option>\n                    <option value=\"resolved\">Resolved</option>\n                    <option value=\"rejected\">Rejected</option>\n                  </select>\n                </td>\n                <td>{{item.userEmail}}</td>\n                <td>\n                  <button class=\"btn btn-sm btn-danger\" (click)=\"deleteFeedback(item._id)\">Delete</button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  `\n})\nexport class AdminComponent implements OnInit {\n  feedback: any[] = [];\n  \n  constructor(private feedbackService: FeedbackService) {}\n  \n  ngOnInit(): void {\n    this.loadFeedback();\n  }\n  \n  loadFeedback(): void {\n    this.feedbackService.getFeedback().subscribe({\n      next: (data) => {\n        this.feedback = data;\n      },\n      error: (err) => {\n        console.error('Failed to load feedback', err);\n      }\n    });\n  }\n  \n  updateStatus(item: any): void {\n    this.feedbackService.updateFeedbackStatus(item._id, item.status).subscribe({\n      next: () => {\n        console.log('Status updated successfully');\n      },\n      error: (err) => {\n        console.error('Failed to update status', err);\n      }\n    });\n  }\n  \n  deleteFeedback(id: string): void {\n    if (confirm('Are you sure you want to delete this feedback?')) {\n      this.feedbackService.deleteFeedback(id).subscribe({\n        next: () => {\n          this.feedback = this.feedback.filter(item => item._id !== id);\n        },\n        error: (err) => {\n          console.error('Failed to delete feedback', err);\n        }\n      });\n    }\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}