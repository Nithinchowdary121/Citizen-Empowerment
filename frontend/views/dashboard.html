<section class="grid">
  <div class="card">
    <h1>City Engagement Dashboard</h1>
    <div class="grid">
      <div class="card"><strong>Total Suggestions</strong><div style="font-size:28px;margin-top:6px">{{metrics.total||0}}</div></div>
      <div class="card"><strong>Active Surveys</strong><div style="font-size:28px;margin-top:6px">{{metrics.surveysCount||0}}</div></div>
      <div class="card"><strong>Survey Responses</strong><div style="font-size:28px;margin-top:6px">{{metrics.responsesCount||0}}</div></div>
    </div>
  </div>

  <div class="card">
    <strong>Recent Suggestions</strong>
    <div class="row" ng-repeat="it in feedback">
      <div><strong>{{it.title}}</strong></div>
      <div>{{it.description}}</div>
      <div>{{it.category}}</div>
      <div class="status">{{it.status}}</div>
      <div style="display:flex;gap:8px;align-items:center;justify-content:flex-end">
        <span>{{it.createdAt | date:'short'}}</span>
        <button class="icon-btn danger" title="Delete" ng-click="removeFeedback(it)">Delete</button>
      </div>
    </div>
  </div>

  <div class="card">
    <strong>Totals</strong>
    <div class="grid">
      <div class="card"><div><strong>Feedbacks</strong></div><div style="font-size:26px;margin-top:6px">{{metrics.total||0}}</div></div>
      <div class="card"><div><strong>Messages Submitted</strong></div><div style="font-size:26px;margin-top:6px">{{metrics.messagesCount||0}}</div></div>
    </div>
  </div>

  <div class="card">
    <strong>Recent Survey Responses</strong>
    <div class="row" ng-repeat="r in responses">
      <div><strong>{{r.surveyId}}</strong></div>
      <div>{{r.answers.length}} answers</div>
      <div>{{r.userEmail || 'anonymous'}}</div>
      <div style="display:flex;gap:8px;align-items:center;justify-content:flex-end">
        <span>{{r.createdAt | date:'short'}}</span>
        <button class="icon-btn danger" ng-click="removeResponse(r)">Delete</button>
      </div>
    </div>
  </div>
</section>


